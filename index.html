<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>

    <section class="chat_section" id="chat_section">
        <div class="result_wrap">
            <div id='result'></div>
        </div>


        <div class="msg_box_wrap">
            <div class="msg_box msg_server_box">
                <input type="text" class="text_box_server" id="text_box_server" placeholder="관리자 메세지 란입니다">
                <button id="send" onclick="msgSendserver('msg_server', '서버', text_box_server)">서버채팅보내기</button>
            </div>


            <div class="msg_box msg_user_box">
                <input type="text" class="text_box_user" id="text_box_user" placeholder="유저메세지 란입니다">
                <button id="send" onclick="msgSendserver('msg_usr', '유저', text_box_user)">유저채팅보내기</button>
            </div>

            
            <div class="msg_close">
                <button onclick="disconnect()">나가기</button>
            </div>
        </div>





        <script>
            let socket = new WebSocket("ws://localhost:8081"),
                result = document.querySelector('#result'),
                text_box_server = document.querySelector('#text_box_server'),
                text_box_user = document.querySelector('#text_box_user')



            socket.onopen = function() {
                console.log('hello!');
            };

            function disconnect() {
                socket.close();
            }



            // function msgSendserver() {
            //     result.innerHTML += "<p class='msg_server'> 서버 : " + text_box_server.value + "</p>";
            //     socket.send(result.innerText);
            // }
            function msgSendserver(type, type_01, type_02) {

                result.innerHTML += "<p class='" + type + "'> " + type_01 + " : " + type_02.value + "</p>";
                socket.send(result.innerText);

            }




            socket.onmessage = function(event) {
                console.log(event.data);
                // socket.send('클라 > 서버');
            };
        </script>
    </section>
</body>

</html>